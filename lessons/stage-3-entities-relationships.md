# Stage 3: Entities & Relationships ๐๐ฆ

ุงููุฑุญูุฉ ุงูุญุงููุฉ ุชุฑูุฒ ุนูู ุจูุงุก ุงูุนูุงูุงุช ุจูู ุงูููุงูุงุช ุงูููุฏุณูุฉุ ูุชุญููู ุณุญุงุจุฉ ุงูููุงุท ุฅูู ูููู ููุฏุณู ูุชูุงูู ูุถู ุงูุฎุทูุท ูุงูููุญููุงุช.

## ุฌุฏูู ุงููุญุชููุงุช
1. [ูุธุงู ุงูุฎุทูุท (Lines System)](#ูุธุงู-ุงูุฎุทูุท)
2. [ููุญููุงุช ุจูุฒูู (Cubic Bezier Splines)](#ููุญููุงุช-ุจูุฒูู)
3. [ุงูุฑุจุท ุนุจุฑ ุงููุนุฑูุงุช (ID-based Linking)](#ุงูุฑุจุท-ุจุงููุนุฑูุงุช)
4. [ุงูุนูู ุงูุชููู: ุญููู ูุงุฌูุฉ ุงูู CAD](#ุงูุนูู-ุงูุชููู)

---

## 1. ูุธุงู ุงูุฎุทูุท (Lines System) {#ูุธุงู-ุงูุฎุทูุท}

ุจุฏุฃูุง ุจุชุนุฑูู `VLine` ููุฑุจุท ุจูู ููุทุชูู. ุงูุฎุท ูู Valentina ููุณ ูุฌุฑุฏ ุฑุณูุ ุจู ูู ุนูุงูุฉ ุฑูุงุถูุฉ ุชุญูู ุฎุตุงุฆุต ูุซู ุงูุทูู ูุงูุฒุงููุฉ.

```rust
#[derive(Debug, Clone, PartialEq)]
pub struct VLine {
    pub metadata: VGObject,
    pub start_point_id: u32,
    pub end_point_id: u32,
}
```

---

## 2. ููุญููุงุช ุจูุฒูู (Cubic Bezier Splines) {#ููุญููุงุช-ุจูุฒูู}

ุจุนุฏ ุชุญููู ููุฏ Valentina ุงูุฃุตูู (`vcubicbezier.cpp`)ุ ูููุง ุจุชูููุฐ ุงูููุญููุงุช ุงูุชูุนูุจูุฉ ุงูุชู ุชุนุชูุฏ ุนูู 4 ููุงุท: (ุงูุจุฏุงูุฉุ ููุทุชุง ุชุญููุ ุงูููุงูุฉ).

### ููุณูุฉ ุฅุนุงุฏุฉ ุงูููุฏุณุฉ (Re-engineering)
ูู ููุฏ C++ุ ูููู ุงููุญุฑู ุจุชูุณูู ุงูููุญูู ูุฏููุงู ุฅูู ููุงุท ุตุบูุฑุฉ ูุฑุณูู. ูู Rust/Dioxusุ ุงุชุฎุฐูุง ูุฑุงุฑุงู ุฃุฐูู:
- **ุชุฎุฒูู ุงูุจูุงูุงุช**: ูุฎุฒู ููุท ุงููุนุฑูุงุช (IDs) ููููุงุท ุงูุฃุฑุจุนุฉ ูู ูููู `VCubicBezier`.
- **ุงูุฑุณู**: ูุนุชูุฏ ุนูู ููุฉ ูุชุตูุญ ุงูููุจ ูู ุฑุณู `SVG Path` ุจุงุณุชุฎุฏุงู ุงูุฃูุฑ `C` (Cubic Bezier). ูุฐุง ูููุฑ ุฏูุฉ ูุชูุงููุฉ ูุฃุฏุงุกู ุนุงููุงู ุฌุฏุงู ุฏูู ุงูุญุงุฌุฉ ูุญุณุงุจุงุช ุชูุณูู ูุนูุฏุฉ.

---

## 3. ุงูุฑุจุท ุนุจุฑ ุงููุนุฑูุงุช (ID-based Linking) {#ุงูุฑุจุท-ุจุงููุนุฑูุงุช}

ูุชุฌูุจ ุชุนููุฏุงุช ุงูู Borrow Checker ูู Rustุ ูุชู ุฑุจุท ุงููุงุฆูุงุช ุนุจุฑ **ุงููุนุฑูุงุช (IDs)**. ุงูุฎุท ูุญูู ID ุงูููุทุฉุ ูุงูููุญูู ูุญูู 4 ูุนุฑูุงุช. ูุฐุง ูุณูุญ ุจุชุนุฏูู ุฃู ููุทุฉ ูู ุงููุณุชูุจู ููุชุญุฑู ุงูููุญูู ุฃู ุงูุฎุท ุงููุฑุชุจุท ุจูุง ุชููุงุฆูุงู.

---

## 4. ุงูุนูู ุงูุชููู: ุญููู ูุงุฌูุฉ ุงูู CAD {#ุงูุนูู-ุงูุชููู}

ุฎูุงู ุชุทููุฑ ูุฐู ุงููุฑุญูุฉุ ูุงุฌููุง ุชุญุฏูุงุช ุชูููุฉ ููููุง ุจุญููุง ุจุฃุณุงููุจ ููุฏุณูุฉ:

### ุฃ. ูุนุถูุฉ ุงูุฅุญุฏุงุซูุงุช (Coordinate Mapping)
ุงุณุชุฎุฏููุง `CoordMapper` ูุน ููุฏ JavaScript ูุฌูุจ ุฃุจุนุงุฏ ุงูุดุงุดุฉ ุงูุญููููุฉุ ููุง ูุถูู ุธููุฑ ุงูููุงุท ุชุญุช ุงููุงูุณ ุจุฏูุฉ 100%.

### ุจ. ุขูุฉ ุงูุญุงูุฉ ููุชูุงุนู (Interaction State Machine)
ุงุณุชุฎุฏููุง `CanvasMode` (Enum) ูุฅุฏุงุฑุฉ ุฎุทูุงุช ุงุฎุชูุงุฑ ุงูููุงุท ุงููุชุนุฏุฏุฉ ููููุญููุงุช (4 ุฎุทูุงุช ุงุฎุชูุงุฑ ูุชุชุงููุฉ) ูุน ุชูููุฑ ุชุบุฐูุฉ ุจุตุฑูุฉ ููุฑูุฉ.

### ุฌ. ุงูุฃุฏุงุก ูุชุฌูุจ ุงูู Deadlocks
ูุณุชุฎุฏู ุชูููุฉ **Snapshotting** ุนุจุฑ `.clone()` ูุจู ุงูุฑุณู ูุถูุงู ุงุณุชูุฑุงุฑ ุงููุตูู ููุจูุงูุงุช ูู Dioxus 0.7.

---

## ๐ ูุง ุงููุงุฏู ูู ุงููุฑุญูุฉ ุงูุซุงูุซุฉุ
- **Task 3.3:** ุชูููุฒ ุงูุนูุงุตุฑ ุงููุฎุชุงุฑุฉ ุจุตุฑูุงู (Selection Highlight).
- **Task 3.4:** ุชุณููุงุช ุงูููุงุท (Labels) ุฏุงุฎู ุงูู Canvas.
- **Task 3.5:** ุนูููุงุช ุงูุญุฐู (Deletion) ูุฅุฏุงุฑุฉ ุชูุงุจุน ุงูุจูุงูุงุช.

**ุงุณุชูุฑ ูู ุจูุงุก ุงููุณุชูุจู ุจู Rust! ๐ฆโจ**
