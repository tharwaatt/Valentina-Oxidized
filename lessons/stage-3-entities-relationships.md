# Stage 3: Entities & Relationships ๐๐ฆ

ุงููุฑุญูุฉ ุงูุญุงููุฉ ูู ุงูููุจ ุงููุงุจุถ ููุดุฑูุน **Valentina-Oxidized**. ูุฑูุฒ ูููุง ุนูู ุจูุงุก ุงูุนูุงูุงุช ุงูููุฏุณูุฉ ุงููุนูุฏุฉุ ูุชุญููู ุณุญุงุจุฉ ุงูููุงุท ุฅูู ูููู ููุฏุณู ูุชูุงูู ูุถู ุงูุฎุทูุทุ ุงูููุญููุงุชุ ุฃุฏูุงุช ุงูููุงุณุ ููุธุงู ุชุฌููุน ุงููุณุงุฑุงุช (Path Consolidation).

## ุฌุฏูู ุงููุญุชููุงุช
1. [ูุธุงู ุงูุฎุทูุท (Lines System)](#ูุธุงู-ุงูุฎุทูุท)
2. [ููุญููุงุช ุจูุฒูู (Cubic Bezier Splines)](#ููุญููุงุช-ุจูุฒูู)
3. [ุฃุฏุงุฉ ุงูููุตู (Angle Bisector Tool)](#ุฃุฏุงุฉ-ุงูููุตู)
4. [ุชุฌููุน ุงููุณุงุฑุงุช (Path Consolidation)](#ุชุฌููุน-ุงููุณุงุฑุงุช)
5. [ูุธุงู ุงูุงุฎุชูุงุฑ ุงูููุญุฏ (Global Selection)](#ูุธุงู-ุงูุงุฎุชูุงุฑ)
6. [ุชุณููุงุช ุงูููุงุท (SVG Text Labels)](#ุชุณููุงุช-ุงูููุงุท)
7. [ุงูุญุฐู ุงููุชุชุงูู (Cascading Deletion)](#ุงูุญุฐู-ุงููุชุชุงูู)
8. [ุญูุธ ูุงุณุชุฑุฌุงุน ุงููุดุฑูุน (JSON Persistence)](#ุญูุธ-ุงููุดุฑูุน)
9. [ุงูุชุญุฑูู ุงูุฏููุงูููู (Interactive Drag & Drop)](#ุงูุชุญุฑูู-ุงูุฏููุงูููู)
10. [ุงูุฑุจุท ุนุจุฑ ุงููุนุฑูุงุช (ID-based Linking)](#ุงูุฑุจุท-ุจุงููุนุฑูุงุช)
11. [ุงูุนูู ุงูุชููู: ุญููู ูุงุฌูุฉ ุงูู CAD](#ุงูุนูู-ุงูุชููู)

---

## 1. ูุธุงู ุงูุฎุทูุท (Lines System) {#ูุธุงู-ุงูุฎุทูุท}

ุจุฏุฃูุง ุจุชุนุฑูู `VLine` ููุฑุจุท ุจูู ููุทุชููุ ููู ูุญูู ุฎุตุงุฆุต ููุฏุณูุฉ ุญูุฉ ูุซู ุงูุทูู ูุฒุงููุฉ ุงููููุ ููุชู ุชุญุฏูุซูุง ุชููุงุฆูุงู ูุน ูู ุญุฑูุฉ.

---

## 2. ููุญููุงุช ุจูุฒูู (Cubic Bezier Splines) {#ููุญููุงุช-ุจูุฒูู}

ูููุง ุจุชูููุฐ ุงูููุญููุงุช ุงูุชูุนูุจูุฉ ุงูุชู ุชุนุชูุฏ ุนูู 4 ููุงุทุ ูุณุชููุฏูู ูู ููุฉ `SVG Path` ูุชูููุฑ ุฏูุฉ ูุชูุงููุฉ ูุฃุฏุงุก ุนุงูู ุฌุฏุงู ุจูุถู ุชุณุฑูุน ุงูุนุชุงุฏ (GPU).

---

## 3. ุฃุฏุงุฉ ุงูููุตู (Angle Bisector Tool) {#ุฃุฏุงุฉ-ุงูููุตู}

ุฃุถููุง ุฃุฏุงุฉ ููุตู ุงูุฒุงููุฉ ุงูุชู ุชููู ุจุชูููุฏ ููุฏุณุฉ ุจูุงุกู ุนูู ุซูุงุซ ููุงุท (ุฑุฃุณ ุงูุฒุงููุฉ ูููุทุชูู ุทุฑููุชูู)ุ ููู ุชุนูุณ ุงูุฑูุงุถูุงุช ุงููุชูุฏูุฉ ูู ููุฏ Valentina ุงูุฃุตูู.

---

## 4. ุชุฌููุน ุงููุณุงุฑุงุช (Path Consolidation) {#ุชุฌููุน-ุงููุณุงุฑุงุช}

ูุฐู ูู ุงูุฎุทูุฉ ุงูุชูููุฏูุฉ ูุฅูุดุงุก "ูุทุน ุงูุจุงุชุฑูู". ูู ุงูู CADุ ูุง ูุชุนุงูู ูุน ุงูุฎุทูุท ููุทุน ูููุตูุฉ ููุฃุจุฏุ ุจู ูุญุชุงุฌ ูุฌูุนูุง ูุชุดููู ุญุฏูุฏ ุงููุทุนุฉ (Contour).

### ุงูููููู ุงููุนูุงุฑู (Entity References):
ุจุฏูุงู ูู ูุณุฎ ุจูุงูุงุช ุงูุฎุทูุท ุฏุงุฎู ุงููุณุงุฑุ ูููุง ุจุฅูุดุงุก ูุธุงู "ุงููุฑุงุฌุน":
```rust
pub enum EntityRef {
    Line(u32),
    Spline(u32),
    Bisector(u32),
}
```
ุงููุณุงุฑ `VContour` ูุญุชูู ุนูู ูุงุฆูุฉ ูู ูุฐู ุงููุฑุงุฌุน. ูุฐุง ูุถูู ุฃููุง ุฅุฐุง ุญุฑููุง ููุทุฉุ ุณูุชุญุฑู ุงูุฎุทุ ูุณูุธูุฑ ุงูุชุบููุฑ ููุฑุงู ุฏุงุฎู ุงููุณุงุฑ ุงููุฌูุน ุฏูู ุฃู ูุฌููุฏ ุฅุถุงูู.

### ุงูุชูุซูู ุงูุจุตุฑู:
ุงูุนูุงุตุฑ ุงูุชู ุชูุถู ููุณุงุฑ (Path) ูุชู ุชูููุฒูุง ุจู **ุณูู ุฃูุจุฑ ูููู ุจุฑุชูุงูู**ุ ููุง ูุนุทู ุงููุตูู ุงูุทุจุงุนุงู ุจุฃู ูุฐู ุงูุนูุงุตุฑ ุฃุตุจุญุช "ููุงูุงู ูุงุญุฏุงู".

---

## 5. ูุธุงู ุงูุงุฎุชูุงุฑ ุงูููุญุฏ (Global Selection) {#ูุธุงู-ุงูุงุฎุชูุงุฑ}

ุจูููุง ูุธุงู ุงุฎุชูุงุฑ ุดุงูู ูุนุชูุฏ ุนูู `SelectedItem` ูุชูุซูู ุฃู ููุงู ููุฏุณูุ ูุน ุชูููุฑ ุชุบุฐูุฉ ุจุตุฑูุฉ ุงุญุชุฑุงููุฉ ุนุจุฑ CSS.

---

## 6. ุชุณููุงุช ุงูููุงุท (SVG Text Labels) {#ุชุณููุงุช-ุงูููุงุท}

ุฃุถููุง ุชุณููุงุช ุญูุฉ ููููุงุท (`P1, P2...`) ูุน ุฅุฒุงุญุฉ ุฐููุฉ ูุถูุงู ุงููุถูุญ ุงูุชุงู ุฃุซูุงุก ุงูุชุตููู.

---

## 7. ุงูุญุฐู ุงููุชุชุงูู (Cascading Deletion) {#ุงูุญุฐู-ุงููุชุชุงูู}

ููุฐูุง ููุทู ุญูุงูุฉ ุณูุงูุฉ ุงูุจูุงูุงุช (Data Integrity)ุ ุญูุซ ูุคุฏู ุญุฐู ุฃู ููุทุฉ ุฅูู ุญุฐู ูุงูุฉ ุงูุนูุงูุงุช ุงููุนุชูุฏุฉ ุนูููุง ุชููุงุฆูุงู.

---

## 8. ุญูุธ ูุงุณุชุฑุฌุงุน ุงููุดุฑูุน (JSON Persistence) {#ุญูุธ-ุงููุดุฑูุน}

ุงุณุชุฎุฏููุง ููุชุจุฉ `rfd` ู `Serde` ูุชูููู ุงููุณุชุฎุฏู ูู ุญูุธ ูุชุตูููุงุชู ูู ูููุงุช JSON ูุงุณุชุฑุฌุงุนูุง ุจููุงูุฐ ุงููุธุงู ุงูุฃุตููุฉ.

---

## 9. ุงูุชุญุฑูู ุงูุฏููุงูููู (Interactive Drag & Drop) {#ุงูุชุญุฑูู-ุงูุฏููุงูููู}

ุญูููุง ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุณูุณุฉ ุชุณูุญ ุจุณุญุจ ุงูููุงุท ูุน ุชุญุฏูุซ ูุญุธู ููุงูุฉ ุงูุชูุงุจุน ุงูููุฏุณูุฉ ุงููุฑุชุจุทุฉ ุจูุง.

---

## 10. ุงูุฑุจุท ุนุจุฑ ุงููุนุฑูุงุช (ID-based Linking) {#ุงูุฑุจุท-ุจุงููุนุฑูุงุช}

ูู ุงูุนููุฏ ุงูููุฑู ูุชุตููููุง ุจู Rustุ ุญูุซ ูุญู ูุดููุฉ ุงูู Borrow Checker ุนุจุฑ ุฑุจุท ุงููุงุฆูุงุช ุจุงููุนุฑูุงุช ุงููุฑูุฏุฉ ุจุฏูุงู ูู ุงููุฑุงุฌุน ุงููุจุงุดุฑุฉ.

---

## 11. ุงูุนูู ุงูุชููู: ุญููู ูุงุฌูุฉ ุงูู CAD {#ุงูุนูู-ุงูุชููู}

ูุงุฌููุง ูุญูููุง ูุนุถูุงุช ุงูุฅุญุฏุงุซูุงุช (Coordinate Mapping)ุ ูุชุฌูุจูุง ุชุฌููุฏ ุงููุงุฌูุฉ (Deadlock Prevention) ุนุจุฑ ุชูููุฉ ุงูู Snapshotting.

---

## ๐ ูุง ุงููุงุฏู ูู ุงููุฑุญูุฉ ุงูุซุงูุซุฉุ
- **Task 3.10:** ุฃุฏูุงุช ุงูููุงุณ ุงูุญูุฉ (ุฅุธูุงุฑ ุงูุฃุทูุงู ูุงูุฒูุงูุง ุจุฌุงูุจ ุงูุฎุทูุท ูู ุงูู Canvas).
- **Task 3.11:** ุงูุฑุจุท ุงูููุทูู ููุจุงุชุฑูู (ุชุญููู ุงููุณุงุฑุงุช ุฅูู ูุทุน ูุงุจูุฉ ูููุต).

**ูุญู ุงูุขู ูููู ูุญุฑูุงู ููุฏุณูุงู ูุชูุงููุงูุ ูุงุฏุฑุงู ุนูู ุชุดููู "ูููู" ุงูุจุงุชุฑูู ุจุฐูุงุก! ๐ฆโจ**
